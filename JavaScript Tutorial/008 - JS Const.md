# JavaScript Const

---

## ECMAScript 2015

​	JavaScript ES2015 ได้มีการนำคีย์เวิร์ดที่สำคัญ 2 อย่างมาใช้คือ `let` และ `const` ตัวแปรที่ประกาศด้วย `const` จะเป็นเหมือน `let` ทุกอย่าง แต่จะแตกต่างกันตรงที่ ตัวแปรแบบ `const` นั้น ไม่สามารถถูกกำหนดค่าใหม่ได้ หลังจากประกาศตัวแปรไปแล้ว ตัวอย่างเช่น

```js
const PI = 3.141592653589793;
PI = 3.14;      // โปรแกรมจะไม่ทำงาน
PI = PI + 10;   // โปรแกรมจะไม่ทำงานเช่นเดียวกัน
```

---

## Block Scope

​	การประกาศตัวแปบด้วย `const` จะคล้ายกับ `let` โดยสามารถเป็น Block Scope ได้ ตามตัวอย่างด้านล่างตัวแปร `x` จะถูกประกาศอยู่ในบล็อคโค้ต โดยจะไม่ได้เป็นตัวเดียวกันกับตัวแปร `x` ที่อยู่ภายนอกโค้ต ตัวอย่างเช่น

```js
var x = 10;
// ตรงนี้ x มีค่าเท่ากับ 10
{
  const x = 2;
  // ตรงนี้ x มีค่าเท่ากับ 2
}
// ตรงนี้ x มีค่าเท่ากับ 10
```

---

## การกำหนดค่าของตัวแปร หลังจากประกาศ

​	ใน JavaScript ตัวแปรแบบ `const` จะต้องถูกกำหนดค่าทันทีหลังจากถูกประกาศออกมา ตัวอย่างเช่น

```js
const PI = 3.14159265359;
```

​	และไม่สามาถประกาศตัวแปรตามตัวอย่างด้านล่างได้

```js
// ไม่สามารถประกาศตัวแปรแบบนี้ได้
const PI;
PI = 3.14159265359;
```

---

## ข้อเทคจริงของ Constants

​	คีย์เวิร์ด `const` อาจจะทำให้เข้าใจผิดเล็กน้อย มันไม่ได้ประกาศค่าคงที่ แต่มันใช้การอ้างอิงค่าคงที่ ด้วยเหตุผลนี้เราจึงไม่สามารถเปลี่ยน ค่าคงที่ที่เป็นแบบ primitive values ได้ แต่เราสามารถเปลี่ยน properties ค่าคงที่ของ objects นั้น ๆ ได้

---

## Primitive Values

​	ถ้าเรากำหนดให้ค่าของ primitive เป็นค่าคงที่ เราจะไม่สามารถเปลี่ยนแปลงค่าของ primitive  ได้ ตัวอย่างเช่น

```js
const PI = 3.141592653589793;
PI = 3.14;      // โปรแกรมจะไม่ทำงาน
PI = PI + 10;   // โปรแกรมจะไม่ทำงานเช่นเดียวกัน
```

---

## Constant Objects can Change

​	เราสามารถเปลี่ยน properties ของ Object ที่เป็นค่าคงที่ได้ ตัวอย่างเช่น

```js
// เราสามารถสร้าง const object
const car = {type:"Fiat", model:"500", color:"white"};

// เราสามารถเปลี่ยน property ของ const object ได้
car.color = "red";

// เราสามารถเพิ่ม property ได้เช่นเดียวกัน
car.owner = "Johnson";
```

แต่เราไม่สามารถประกาศตัวแปรเดิมของ constant object ได้ ตัวอย่างเช่น

```js
const car = {type:"Fiat", model:"500", color:"white"};
car = {type:"Volvo", model:"EX60", color:"red"};    // ERROR
```

---

## ค่า Constant ใน Array สามารถเปลี่ยนแปลงได้

 	เราสามารถเปลี่ยนแปลงค่าที่อยู่ใน constant array ได้ ตัวอย่างเช่น

```js
// เราสามารถสร้าง constant array ได้
const cars = ["Saab", "Volvo", "BMW"];

// เราสามารถเปลี่ยน element ได้
cars[0] = "Toyota";

// เราสามารถเพิ่ม element ได้เช่นเดียวกัน
cars.push("Audi");
```

​	แต่เราไม่สามารถประกาศตัวแปรเดิมของ constant array ได้ ตัวอย่างเช่น

```js
const cars = ["Saab", "Volvo", "BMW"];
cars = ["Toyota", "Volvo", "Audi"];    // ERROR
```

---

## การประกาศตัวแปรเดิม

​	การประกาศตัวแปรเดิมใน JavaScript โดยใช้ `var` จะสามารถทำได้ทุกที่ในโปรแกรม ตัวอย่างเช่น

```js
var x = 2;    //  Allowed
var x = 3;    //  Allowed
x = 4;        //  Allowed
```

​	การประกาศตัวแปรเดิมที่เป็นประเภท `const` หรือการกำหนดค่า `const` ที่อยู่ในบล็อคโค้ตเดียวกันจะไม่สามารถทำได้

```js
const x = 2;       // Allowed
const x = 3;       // Not allowed
x = 3;             // Not allowed
var x = 3;         // Not allowed
let x = 3;         // Not allowed

{
  const x = 2;   // Allowed
  const x = 3;   // Not allowed
  x = 3;         // Not allowed
  var x = 3;     // Not allowed
  let x = 3;     // Not allowed
}
```

​		การประกาศตัวแปรเดิมที่เป็นประเภท `const` แต่อยู่คนละบล็อคโค้ตกัน สามารถทำได้ ตัวอย่างเช่น

```js
const x = 2;       // Allowed

{
  const x = 3;   // Allowed
}

{
  const x = 4;   // Allowed
}
```

---

## Hoisting

​	ตัวแปรที่ประกาศด้วย `var` จะติด **hoisted** ไปยังบนสุดของคำสั่งทั้งหมด และสามารถเรียกใช้งานได้ตลอดเวลา หมายความว่า เราสามารถใช้ตัวแปรได้ก่อนที่เราจะประกาศ ตัวอย่างเช่น

```js
// โค้ตสามารถทำงานได้
carName = "Volvo";
alert(carName);
var carName;
```

​	ตัวแปรที่ประกาศด้วย `const` จะติด hoisted ไปยังบนสุดของบล็อคโค้ต แต่จะไม่สามารถเรียกใช้งานได้ หมายความว่า บล็อคโค้ตจะรับรู้ถึงการมีอยู่ของตัวแปร แต่จะไม่สามารถเรียกใช้งานก่อนได้ จนกว่าตัวแปรนั้นจะถูกประกาศ ถ้าเราเรียกใช้ตัวแปรก่อนที่เราจะประกาศ โปรแกรมจะไม่สามารถทำงานได้ ตัวอย่างเช่น 

```js
// โค้ตไม่สามารถทำงานได้
carName = "Volvo";
const carName;
```

